<div
  *ngIf="job as j"
  class="bg-gray-900/50 border border-gray-800 rounded-2xl p-6 shadow-lg shadow-black/30 space-y-6"
>

  <div>
    <h3 class="text-lg font-semibold mb-1">Role Summary</h3>
    <p class="text-gray-400 text-sm whitespace-pre-line">
      {{ j.stackSummary || 'No stack summary provided.' }}
    </p>
  </div>

  <hr class="border-gray-800" />

  <div>
    <h3 class="text-lg font-semibold mb-1">Match Score</h3>
    <p class="text-orange-400 text-3xl font-bold leading-tight">
      {{ j.finalScore | number:'1.0-2' }}
    </p>
  </div>

  <hr class="border-gray-800" />

  <div>
    <h3 class="text-lg font-semibold mb-2">Matched Skills</h3>

    <div *ngIf="(j.matchedSkills?.length ?? 0 ) > 0; else noMatched"
         class="flex flex-wrap gap-2">
      <span
        *ngFor="let skill of j.matchedSkills"
        class="px-2 py-1 rounded-md bg-green-700/40 text-sm text-green-300"
      >
        {{ skill }}
      </span>
    </div>

    <ng-template #noMatched>
      <p class="text-gray-500 text-sm">No matched skills.</p>
    </ng-template>
  </div>

  <div>
    <h3 class="text-lg font-semibold mb-2">Missing Skills</h3>

    <div *ngIf="(j.missingSkills?.length ?? 0 ) > 0; else noMissing"
         class="flex flex-wrap gap-2">
      <span
        *ngFor="let skill of j.missingSkills"
        class="px-2 py-1 rounded-md bg-red-800/40 text-sm text-red-300"
      >
        {{ skill }}
      </span>
    </div>

    <ng-template #noMissing>
      <p class="text-gray-500 text-sm">No missing skills.</p>
    </ng-template>
  </div>

  <div class="pt-2">
    <a
      [href]="j.applyUrl || '#'"
      target="_blank"
      class="block text-center bg-orange-500 hover:bg-orange-600
             text-black font-bold py-3 px-6 rounded-xl transition
             disabled:bg-gray-700 disabled:text-gray-400"
      [class.pointer-events-none]="!j.applyUrl"
    >
      {{ j.applyUrl ? 'Apply Now' : 'Apply Link Unavailable' }}
    </a>
  </div>

</div>
